{"version":3,"sources":["SessionContext.ts","LoginPrompt.tsx","Login.tsx","Profile/WebIdForm.tsx","data.ts","InterestSearch.tsx","Profile/InterestTag.tsx","Profile/Profile.tsx","Profile/index.tsx","App.tsx","reportWebVitals.ts","SessionProvider.tsx","index.tsx"],"names":["SessionContext","createContext","status","webId","LoginPrompt","onLogin","props","useState","promptOpen","setPromptOpen","localStorage","getItem","idp","setIdp","className","onSubmit","e","preventDefault","setItem","id","type","value","onChange","newValue","currentTarget","placeholder","onClick","Login","useContext","session","setSession","useEffect","a","handleIncomingRedirect","info","isLoggedIn","alert","message","handleLogin","login","oidcIssuer","clientName","getDefaultSession","handleLogout","logout","WebIdForm","onChangeUser","userId","setUserId","handleChangeUserId","target","wikidataRegex","httpRegex","fetchTurtle","params","uri","options","rest","headers","accept","window","fetch","getInterest","match","dataUri","test","slice","text","rawData","parseInterest","abortController","AbortController","searchInterestsFactory","queryGenerator","dataMap","query","abort","length","signal","response","json","data","name","searchInterestsWikidata","encodeURIComponent","search","map","concepturi","description","label","searchInterestsDBPedia","docs","resource","parser","N3","ttl","interest","Promise","resolve","reject","parse","error","quad","prefixes","subject","predicate","rdfs","object","termType","language","schema","comment","debouncedSearchWikidata","debounce","debouncedSearchDBPedia","InterestSearch","onSelectInterest","setQuery","found","setFound","source","setSource","output","current","handleClickInterest","InterestTag","onClose","title","pending","href","disabled","Photo","styled","img","Profile","user","loggedUserId","onAddInterest","onRemoveInterest","interests","Object","values","photo","src","alt","ProfileContainer","setUser","handleAddInterest","keys","includes","getSolidDataset","auth","dataset","getThing","updatedUser","addUrl","foaf","topic_interest","changedDataset","setThing","saveSolidDatasetAt","handleRemoveInterest","removeUrl","getTerm","vcard","hasPhoto","interestUris","getUrlAll","preInterests","fromEntries","then","newUserId","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","SessionProvider","children","setInfo","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.73cfbb05.chunk.js","sourcesContent":["import { createContext } from 'react'\n\nexport type SessionInfo = {\n  status: 'in' | 'out' | 'pending'\n  webId: string\n}\n\nconst SessionContext = createContext<\n  [SessionInfo, React.Dispatch<React.SetStateAction<SessionInfo>>]\n>([\n  { status: 'out', webId: '' },\n  () => {\n    return\n  },\n])\n\nexport default SessionContext\n","import React, { useState } from 'react'\n\ninterface Props {\n  onLogin: (oidcIssuer: string) => void\n}\n\nconst LoginPrompt: React.FC<Props> = ({ onLogin, ...props }: Props) => {\n  const [promptOpen, setPromptOpen] = useState(false)\n  const [idp, setIdp] = useState(\n    localStorage.getItem('idp') ?? 'https://solidcommunity.net',\n  )\n\n  const onSubmit: React.FormEventHandler = e => {\n    e.preventDefault()\n    localStorage.setItem('idp', idp)\n    onLogin(idp)\n  }\n\n  const onChangeInput = (e: React.FormEvent<HTMLInputElement>) => {\n    e.preventDefault()\n    const newValue = e.currentTarget.value\n    setIdp(newValue)\n  }\n\n  if (!promptOpen) {\n    return (\n      <button\n        {...props}\n        className=\"button\"\n        onClick={e => {\n          e.preventDefault()\n          setPromptOpen(true)\n        }}\n      >\n        Login\n      </button>\n    )\n  }\n\n  return (\n    <div className=\"card\">\n      <header className=\"card-header\">\n        <p className=\"card-header-title\">Select your Solid identity provider</p>\n      </header>\n      <div className=\"card-content\">\n        <form onSubmit={onSubmit}>\n          <div className=\"field\">\n            <div className=\"control\">\n              <input\n                id=\"idp\"\n                className=\"input\"\n                type=\"url\"\n                value={idp}\n                onChange={onChangeInput}\n                placeholder=\"Where is your Solid Pod?\"\n              />\n            </div>\n          </div>\n          <div className=\"field\">\n            <div className=\"control\">\n              <input type=\"submit\" value=\"Connect\" className=\"button is-link\" />\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default LoginPrompt\n","import React, { useEffect, useContext } from 'react'\nimport {\n  login,\n  handleIncomingRedirect,\n  logout,\n  getDefaultSession,\n} from '@inrupt/solid-client-authn-browser'\nimport SessionContext, { SessionInfo } from './SessionContext'\nimport LoginPrompt from './LoginPrompt'\n\nconst Login = () => {\n  const [session, setSession] = useContext(SessionContext)\n\n  useEffect(() => {\n    ;(async () => {\n      try {\n        const info = await handleIncomingRedirect()\n        if (info && info.isLoggedIn)\n          setSession({ status: 'in', webId: info?.webId ?? '' })\n        else setSession({ status: 'out', webId: '' })\n      } catch (error) {\n        alert('error signing in' + error.message)\n        setSession({ status: 'out', webId: '' })\n      }\n    })()\n  }, [setSession])\n\n  const handleLogin = async (idp: string) => {\n    setSession({ status: 'pending', webId: '' })\n    try {\n      await login({\n        oidcIssuer: idp,\n        clientName: 'Solid Interests',\n      })\n      const { info } = getDefaultSession()\n      setSession({ status: 'in', webId: info?.webId ?? '' })\n    } catch (error) {\n      alert(error.message)\n      setSession({ status: 'out', webId: '' })\n    }\n  }\n\n  const handleLogout = async () => {\n    setSession((session: SessionInfo) => ({\n      webId: session.webId,\n      status: 'pending',\n    }))\n    try {\n      await logout()\n      setSession({ status: 'out', webId: '' })\n    } catch (error) {\n      alert(error.message)\n      setSession((session: SessionInfo) => ({\n        webId: session.webId,\n        status: 'in',\n      }))\n    }\n  }\n\n  if (session.status === 'pending') return <>Loading</>\n  if (session.status === 'in')\n    return (\n      <button className=\"button\" onClick={handleLogout}>\n        Log out\n      </button>\n    )\n  return <LoginPrompt onLogin={handleLogin} />\n}\n\nexport default Login\n","import React, { FormEvent, useState } from 'react'\n\ninterface Props {\n  webId: string\n  onChangeUser: (webId: string) => void\n}\n\nconst WebIdForm: React.FC<Props> = ({ webId, onChangeUser }) => {\n  const [userId, setUserId] = useState(webId)\n\n  const handleChangeUserId = async (e: FormEvent) => {\n    e.preventDefault()\n    onChangeUser(userId)\n  }\n\n  return (\n    <>\n      <form onSubmit={handleChangeUserId}>\n        <input\n          className=\"input\"\n          type=\"text\"\n          value={userId}\n          onChange={e => setUserId(e.target.value)}\n        />\n        <button\n          className=\"button\"\n          type=\"button\"\n          onClick={() => setUserId(webId)}\n        >\n          my webId\n        </button>\n      </form>\n    </>\n  )\n}\n\nexport default WebIdForm\n","import { rdfs, schema } from 'rdf-namespaces'\nimport { Interest } from './Profile'\nimport * as N3 from 'n3'\n\nconst wikidataRegex =\n  /^https?:\\/\\/(w{3}\\.)?wikidata\\.org\\/entity\\/([A-Z0-9]*)\\/?$/\n\nconst httpRegex = /^http:\\/\\//\n\nconst fetchTurtle: typeof window.fetch = (...params) => {\n  const [uri, options, ...rest] = params\n\n  const headers = { accept: 'text/turtle', ...(options?.headers ?? {}) }\n\n  return window.fetch(uri, { ...options, headers }, ...rest)\n}\n\nexport const getInterest = async (uri: string): Promise<Interest> => {\n  const id = uri.match(wikidataRegex)?.[2] ?? ''\n  const dataUri = id\n    ? `https://www.wikidata.org/wiki/Special:EntityData/${id}.ttl`\n    : httpRegex.test(uri)\n    ? `https://${uri.slice(7)}`\n    : uri\n  const rawData = await (await fetchTurtle(dataUri)).text()\n  return await parseInterest(rawData, uri)\n}\n\nlet abortController = new AbortController()\n\nconst searchInterestsFactory =\n  <Body>(\n    queryGenerator: (query: string) => string,\n    dataMap: (body: Body) => Interest[],\n  ) =>\n  async (query: string) => {\n    abortController.abort() // Cancel the previous request\n    abortController = new AbortController()\n\n    if (query.length === 0) {\n      return []\n    }\n\n    try {\n      let response = await window.fetch(queryGenerator(query), {\n        signal: abortController.signal,\n      })\n      const data = (await response.json()) as Body\n\n      return dataMap(data)\n    } catch (ex) {\n      if (ex.name === 'AbortError') {\n        return // Continuation logic has already been skipped, so return normally\n      }\n\n      throw ex\n    }\n  }\n\ntype WikidataResponse = {\n  search: { concepturi: string; description: string; label: string }[]\n}\n\nexport const searchInterestsWikidata = searchInterestsFactory<WikidataResponse>(\n  query =>\n    `https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${encodeURIComponent(\n      query,\n    )}&format=json&errorformat=plaintext&language=en&uselang=en&type=item&origin=*`,\n  data =>\n    data.search.map(({ concepturi: uri, description, label }) => ({\n      uri,\n      description,\n      label,\n    })),\n)\n\ntype DBPediaResponse = {\n  docs: { resource: [string]; label: [string] }[]\n}\n\nexport const searchInterestsDBPedia = searchInterestsFactory<DBPediaResponse>(\n  query =>\n    `https://lookup.dbpedia.org/api/prefix?query=${encodeURIComponent(\n      query,\n    )}&format=json$`,\n  data =>\n    data.docs.map(({ resource: [uri], label: [label] }) => ({\n      uri,\n      description: '...',\n      label,\n    })),\n)\n\nconst parser = new N3.Parser()\nconst parseInterest = async (ttl: string, uri: string): Promise<Interest> => {\n  const interest: Interest = { uri, description: '', label: '' }\n  return new Promise((resolve, reject) => {\n    parser.parse(ttl, (error, quad, prefixes) => {\n      if (error) {\n        return reject(error)\n      } else if (quad) {\n        if (quad.subject.id === uri) {\n          if (\n            quad.predicate.id === rdfs.label &&\n            quad.object.termType === 'Literal' &&\n            quad.object.language === 'en'\n          ) {\n            interest.label = quad.object.value\n          }\n\n          if (\n            (quad.predicate.id === schema.description ||\n              quad.predicate.id === rdfs.comment) &&\n            quad.object.termType === 'Literal' &&\n            quad.object.language === 'en'\n          ) {\n            interest.description = quad.object.value\n          }\n        }\n      } else {\n        return resolve(interest)\n      }\n    })\n  })\n}\n","import React, { useEffect, useState } from 'react'\nimport debounce from 'debounce-promise'\nimport { searchInterestsWikidata, searchInterestsDBPedia } from './data'\nimport { Interest } from './Profile'\n\nconst debouncedSearchWikidata = debounce(searchInterestsWikidata, 30)\nconst debouncedSearchDBPedia = debounce(searchInterestsDBPedia, 30)\n\ninterface Props {\n  onSelectInterest: (interest: Interest) => void\n}\n\nconst InterestSearch: React.FC<Props> = ({ onSelectInterest }) => {\n  const [query, setQuery] = useState('')\n  const [found, setFound] = useState<Interest[]>([])\n  const [source, setSource] = useState<'dbp' | 'wd'>('wd')\n\n  useEffect(() => {\n    ;(async () => {\n      const output = await (source === 'wd'\n        ? debouncedSearchWikidata\n        : debouncedSearchDBPedia)(query)\n      if (output) {\n        setFound(output)\n      }\n    })()\n  }, [query, source])\n\n  const handleClickInterest = (interest: Interest) => {\n    setQuery('')\n    onSelectInterest(interest)\n  }\n\n  const handleSwitchSource = () => {\n    setSource(current => (current === 'wd' ? 'dbp' : 'wd'))\n  }\n\n  return (\n    <>\n      <input\n        type=\"text\"\n        className=\"input\"\n        placeholder=\"add interest\"\n        value={query}\n        onChange={e => setQuery(e.target.value)}\n      />\n      <button className=\"button\" onClick={handleSwitchSource}>\n        {source === 'wd' ? 'wikidata' : 'dbpedia'}\n      </button>\n      <ul>\n        {found.map(interest => (\n          <li key={interest.uri} onClick={() => handleClickInterest(interest)}>\n            {interest.label}: {interest.description}\n          </li>\n        ))}\n      </ul>\n    </>\n  )\n}\n\nexport default InterestSearch\n","import React from 'react'\nimport { Interest } from '.'\n\ninterface Props {\n  interest: Interest\n  onClose: () => void\n}\n\nconst InterestTag: React.FC<Props> = ({ interest, onClose }) => (\n  <div className=\"tags has-addons\">\n    <a\n      title={interest.description}\n      className={`tag is-link${interest.pending ? ' is-light' : ''}`}\n      href={interest.uri}\n    >\n      {interest.label}\n    </a>\n    <button\n      disabled={!!interest.pending}\n      onClick={() => onClose()}\n      className=\"tag is-delete\"\n    ></button>\n  </div>\n)\n\nexport default InterestTag\n","import React from 'react'\nimport { Interest, User } from '.'\nimport styled from 'styled-components'\nimport InterestSearch from '../InterestSearch'\nimport InterestTag from './InterestTag'\nimport { IriString } from '@inrupt/solid-client'\n\ninterface Props {\n  user: User\n  loggedUserId: IriString\n  onAddInterest: (interest: Interest) => void\n  onRemoveInterest: (interest: Interest) => void\n}\n\nconst Photo = styled.img`\n  && {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n`\n\nconst Profile: React.FC<Props> = ({\n  user,\n  loggedUserId,\n  onAddInterest,\n  onRemoveInterest,\n}) => {\n  const interests = Object.values(user.interests)\n  return (\n    <div className=\"card\">\n      <div className=\"card-content\">\n        <div className=\"media\">\n          <div className=\"media-left\">\n            <figure className=\"image is-48x48\">\n              {user.photo && (\n                <Photo src={user.photo} alt={`Photo of ${user.name}`} />\n              )}\n            </figure>\n          </div>\n          <div className=\"media-content\">\n            <p className=\"title is-4\">{user.name}</p>\n            <p className=\"subtitle is-6\">\n              <a href={user.webId}>{user.webId}</a>\n            </p>\n          </div>\n        </div>\n\n        <div className=\"content\">\n          {interests.length > 0 ? (\n            <div className=\"field is-grouped is-grouped-multiline\">\n              {interests.map(interest => (\n                <div key={interest.uri} className=\"control\">\n                  <InterestTag\n                    interest={interest}\n                    onClose={() => onRemoveInterest(interest)}\n                  />\n                </div>\n              ))}\n            </div>\n          ) : (\n            'no interests'\n          )}\n          {loggedUserId === user.webId && (\n            <InterestSearch onSelectInterest={onAddInterest} />\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Profile\n","import React, { useEffect, useState } from 'react'\nimport WebIdForm from './WebIdForm'\nimport {\n  addUrl,\n  getSolidDataset,\n  getTerm,\n  getThing,\n  getUrlAll,\n  IriString,\n  removeUrl,\n  saveSolidDatasetAt,\n  setThing,\n} from '@inrupt/solid-client'\n// import { fetch } from '@inrupt/solid-client-authn-browser'\nimport * as auth from '@inrupt/solid-client-authn-browser'\nimport Profile from './Profile'\nimport { foaf, vcard } from 'rdf-namespaces'\nimport { getInterest } from '../data'\n\ninterface Props {\n  webId: string\n}\n\nexport type Interest = {\n  label: string\n  uri: IriString\n  description: string\n  pending?: boolean\n}\n\nexport type User = {\n  webId: string\n  name: string\n  photo: string\n  interests: { [uri: string]: Interest }\n}\n\nconst ProfileContainer: React.FC<Props> = ({ webId }) => {\n  const [userId, setUserId] = useState(webId)\n  const [user, setUser] = useState<User>({\n    webId: '',\n    name: '',\n    photo: '',\n    interests: {},\n  })\n\n  const handleChangeUser = (newUserId: string) => {\n    setUserId(newUserId)\n  }\n\n  const handleAddInterest = async (interest: Interest) => {\n    if (!Object.keys(user.interests).includes(interest.uri)) {\n      setUser(user => ({\n        ...user,\n        interests: {\n          ...user.interests,\n          ...{ [interest.uri]: { ...interest, pending: true } },\n        },\n      }))\n      const dataset = await getSolidDataset(userId, { fetch: auth.fetch })\n      const user = getThing(dataset, userId)\n      if (user) {\n        const updatedUser = addUrl(user, foaf.topic_interest, interest.uri)\n        const changedDataset = setThing(dataset, updatedUser)\n        await saveSolidDatasetAt(userId, changedDataset, { fetch: auth.fetch })\n      }\n      setUser(user => ({\n        ...user,\n        interests: {\n          ...user.interests,\n          ...{ [interest.uri]: { ...interest } },\n        },\n      }))\n    } else alert(`${interest.label} already added`)\n  }\n\n  const handleRemoveInterest = async (interest: Interest) => {\n    setUser(user => ({\n      ...user,\n      interests: {\n        ...user.interests,\n        ...{ [interest.uri]: { ...interest, pending: true } },\n      },\n    }))\n    const dataset = await getSolidDataset(userId, { fetch: auth.fetch })\n    const user = getThing(dataset, userId)\n    if (user) {\n      const updatedUser = removeUrl(user, foaf.topic_interest, interest.uri)\n      const changedDataset = setThing(dataset, updatedUser)\n      await saveSolidDatasetAt(userId, changedDataset, { fetch: auth.fetch })\n    }\n    setUser(user => {\n      const { [interest.uri]: _interest, ...interests } = user.interests\n      return {\n        ...user,\n        interests,\n      }\n    })\n  }\n\n  // fetch the new user when userId changes\n  useEffect(() => {\n    setUser({\n      webId: '',\n      name: '',\n      photo: '',\n      interests: {},\n    })\n    ;(async () => {\n      const dataset = await getSolidDataset(userId, { fetch: auth.fetch })\n      const user = getThing(dataset, userId)\n      if (user) {\n        const name = getTerm(user, foaf.name)?.value ?? ''\n        const photo =\n          getTerm(user, foaf.img)?.value ??\n          getTerm(user, vcard.hasPhoto)?.value ??\n          ''\n        const interestUris = getUrlAll(user, foaf.topic_interest)\n        const preInterests = Object.fromEntries(\n          interestUris.map(uri => [\n            uri,\n            { uri, label: '...', description: '', pending: true },\n          ]),\n        )\n        setUser({ name, photo, webId: userId, interests: preInterests })\n\n        for (const uri of interestUris) {\n          getInterest(uri).then(interest =>\n            setUser(user => ({\n              ...user,\n              interests: {\n                ...user.interests,\n                ...{ [interest.uri]: { ...interest } },\n              },\n            })),\n          )\n        }\n      }\n    })()\n  }, [userId, webId])\n\n  return (\n    <>\n      <WebIdForm webId={webId} onChangeUser={handleChangeUser} />\n      {user.webId ? (\n        <Profile\n          onAddInterest={handleAddInterest}\n          onRemoveInterest={handleRemoveInterest}\n          user={user}\n          loggedUserId={webId}\n        />\n      ) : (\n        'loading profile...'\n      )}\n    </>\n  )\n}\n\nexport default ProfileContainer\n","import React, { useContext } from 'react'\nimport Login from './Login'\nimport Profile from './Profile'\nimport SessionContext from './SessionContext'\n\nfunction App() {\n  const [info] = useContext(SessionContext)\n  return (\n    <>\n      <Login />\n      {info.status === 'in' && <Profile webId={info.webId} />}\n    </>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React, { ReactNode, useState } from 'react'\nimport SessionContext, { SessionInfo } from './SessionContext'\ninterface Props {\n  children: ReactNode\n}\n\nconst SessionProvider: React.FC<Props> = ({ children }) => {\n  const [info, setInfo] = useState<SessionInfo>({\n    status: 'pending',\n    webId: '',\n  })\n  return (\n    <SessionContext.Provider value={[info, setInfo]}>\n      {children}\n    </SessionContext.Provider>\n  )\n}\n\nexport default SessionProvider\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\nimport SessionProvider from './SessionProvider'\n\nReactDOM.render(\n  <React.StrictMode>\n    <SessionProvider>\n      <App />\n    </SessionProvider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}